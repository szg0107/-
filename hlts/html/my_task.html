<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>我的任务</title>
    <style>
        .gps_font {
            font-size: 48px;
            color: black;
        }
    </style>
    <meta name=viewport content="user-scalable=no">
</head>
<body style="margin: 0 auto;padding: 0;"bgcolor="#efeef4">
<div id="content">
    <ylt.for dataId="1499762079185">
        <table border="0" cellpadding="0" cellspacing="0" width="100%" name="options" style="margin-top: 4px;" id="$value">
            <tr style="height: 133px;" onclick="clickTask('$value','$value','$value','$value','$value','$value','$value');" bgcolor="white">
                <td align="left"><span style="margin-left: 30px;" class="gps_font" name="circleName">$value</span></td>
                <td align="right"><img src="images/pages/into_lan.png" style="margin-right: 30px;"/></td>
            </tr>
        </table>
    </ylt.for>
    <div id="completeTask">
        <ylt.for dataId="1500369253436">
            <div name="complete">$value</div>
        </ylt.for>
    </div>
</div>
<div id="tishi" class="gps_font" align="center"></div>
</body>
<script type="text/javascript">
    function promptInformation(){
        /*var content=document.getElementById("content");content.children==undefined||*/
        if(content.children.length==0){
            tishi.innerHTML="您目前还没有任务!";
        }
    }

    /*去掉已完成的任务*/
    function getRidOfTheTask(){
        var complete=document.getElementsByName('complete');
        var options = document.getElementsByName('options');
        for(var i=0;i<options.length;i++){
            for(var u=0;u<complete.length;u++){
                if(options[i]==undefined){
                    break;
                }else{
                    if(options[i].id==complete[u].innerText){
                        options[i].parentNode.removeChild(options[i]);
                        i--;
                    }
                }
            }
        }
        /*删除标签*/
        completeTask.parentNode.removeChild(completeTask);
    }
    getRidOfTheTask();
    promptInformation();
    /*类型 id  任务描述  选择数量 缴费类型 缴费金额 个性缴费金额*/
    function clickTask(taskType, taskID, taskDescription,selectNumber,paymentType,paymentAmount,individualContribution) {

        var task = {
            "taskType": taskType,
            "taskID": taskID,
            'taskDescription': taskDescription,
            'selectNumber': selectNumber,
            'paymentType':paymentType,
            'paymentAmount': paymentAmount,
            'individualContribution':individualContribution

        };
        var taskarray = [taskType, taskID, taskDescription,selectNumber,paymentType,paymentAmount,individualContribution];
        var userAgent = navigator.userAgent;
        if (userAgent.indexOf("iPhone") >= 0) {
            window.webkit.messageHandlers.intoTask.postMessage(task);
        } else {
            window.callByJs.setValue(taskarray);
        }
    }
</script>
</html>
